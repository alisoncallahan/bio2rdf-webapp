@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix dc: <http://purl.org/dc/elements/1.1/>.
@prefix queryall_profile: <http://purl.org/queryall/profile:> .
@prefix queryall_rdfrule: <http://purl.org/queryall/rdfrule:> .
@prefix bio2rdf_provider: <http://bio2rdf.org/provider:> .
@prefix bio2rdf_query: <http://bio2rdf.org/query:> .
@prefix bio2rdf_rdfrule: <http://bio2rdf.org/rdfrule:> .
@prefix bio2rdf_ns: <http://bio2rdf.org/ns:> .

bio2rdf_rdfrule:sparqlowlsameastrivialdelete a queryall_rdfrule:NormalisationRule , queryall_rdfrule:TransformationRule , queryall_rdfrule:SparqlNormalisationRule , queryall_rdfrule:SparqlConstructRule ;
    queryall_rdfrule:sparqlMode queryall_rdfrule:onlyDeleteMatchingTriples ;
    queryall_rdfrule:sparqlConstructQueryTarget "?myUri <http://www.w3.org/2002/07/owl#sameAs> ?myUri ." ;
    queryall_rdfrule:sparqlWherePattern "?myUri <http://www.w3.org/2002/07/owl#sameAs> ?myUri ." ;
	queryall_rdfrule:stage queryall_rdfrule:afterResultsToPool ;
	dc:title "Deletes trivial owl:sameAs rdf triples that are generated by some providers" ;
	queryall_rdfrule:order "100"^^xsd:int ;
	queryall_profile:profileIncludeExcludeOrder queryall_profile:excludeThenInclude .

bio2rdf_rdfrule:bio2rdfurldelete a queryall_rdfrule:NormalisationRule , queryall_rdfrule:TransformationRule , queryall_rdfrule:SparqlNormalisationRule , queryall_rdfrule:SparqlConstructRule ;
    queryall_rdfrule:sparqlMode queryall_rdfrule:onlyDeleteMatchingTriples ;
    queryall_rdfrule:sparqlConstructQueryTarget "?myUri <http://bio2rdf.org/bio2rdf_resource:url> ?url ." ;
    queryall_rdfrule:sparqlWherePattern "?myUri <http://bio2rdf.org/bio2rdf_resource:url> ?url . FILTER(str(?url) = \"http://bio2rdf.org/\") ." ;
	queryall_rdfrule:stage queryall_rdfrule:afterResultsToPool ;
	dc:title "Deletes triples that include links to the base URL http://bio2rdf.org/ as they are generated by incorrect rdfisers." ;
	queryall_rdfrule:order "100"^^xsd:int ;
	queryall_profile:profileIncludeExcludeOrder queryall_profile:excludeThenInclude .

bio2rdf_rdfrule:removeemptynamespaceucscuris a queryall_rdfrule:NormalisationRule , queryall_rdfrule:TransformationRule , queryall_rdfrule:SparqlNormalisationRule , queryall_rdfrule:SparqlConstructRule ;
    queryall_rdfrule:sparqlMode queryall_rdfrule:onlyDeleteMatchingTriples ;
    queryall_rdfrule:sparqlConstructQueryTarget "?myUri ?property <http://bio2rdf.org/ucsc:> . " ;
    queryall_rdfrule:sparqlWherePattern "?myUri ?property <http://bio2rdf.org/ucsc:> . " ;
	queryall_rdfrule:stage queryall_rdfrule:afterResultsToPool ;
	dc:title "Deletes statements that include the empty URI http://bio2rdf.org/ucsc: due to broken RDF generation scripts" ;
	queryall_rdfrule:order "100"^^xsd:int ;
	queryall_profile:profileIncludeExcludeOrder queryall_profile:excludeThenInclude .

bio2rdf_rdfrule:sparqllinkedtofromunretrievedblanknoderemoval a queryall_rdfrule:NormalisationRule , queryall_rdfrule:TransformationRule , queryall_rdfrule:SparqlNormalisationRule , queryall_rdfrule:SparqlConstructRule ;
    queryall_rdfrule:sparqlMode queryall_rdfrule:onlyDeleteMatchingTriples ;
    queryall_rdfrule:sparqlConstructQueryTarget "?myUri <http://bio2rdf.org/bio2rdf_resource:linkedToFrom> ?blanknode . ";
    queryall_rdfrule:sparqlWherePattern "?myUri <http://bio2rdf.org/bio2rdf_resource:linkedToFrom> ?blanknode . FILTER(isBlank(?blanknode)) OPTIONAL { ?blanknode ?pred ?obj } .
         FILTER (!bound(?obj)) " ;
	queryall_rdfrule:stage queryall_rdfrule:afterResultsToPool ;
	dc:title "Deletes references to blank nodes that were created using the linkedToFrom rule if there is no other information about the blank node, as it is completely useless in these cases." ;
	queryall_rdfrule:order "100"^^xsd:int ;
	queryall_profile:profileIncludeExcludeOrder queryall_profile:excludeThenInclude .
 
bio2rdf_rdfrule:sparqlobodbxrefunretrievedblanknoderemoval a queryall_rdfrule:NormalisationRule , queryall_rdfrule:TransformationRule , queryall_rdfrule:SparqlNormalisationRule , queryall_rdfrule:SparqlConstructRule ;
    queryall_rdfrule:sparqlMode queryall_rdfrule:onlyDeleteMatchingTriples ;
    queryall_rdfrule:sparqlConstructQueryTarget "?myUri <http://bio2rdf.org/obo_resource:dbxref> ?blanknode . " ;
    queryall_rdfrule:sparqlWherePattern "?myUri <http://bio2rdf.org/obo_resource:dbxref> ?blanknode . FILTER(isBlank(?blanknode)) OPTIONAL { ?blanknode ?pred ?obj } .
         FILTER (!bound(?obj))" ;
	queryall_rdfrule:stage queryall_rdfrule:afterResultsToPool ;
	dc:title "Deletes references to blank nodes that were in OBO as dbxrefs rule if there is no other information about the blank node, as it is completely useless in these cases." ;
	queryall_rdfrule:order "100"^^xsd:int ;
	queryall_profile:profileIncludeExcludeOrder queryall_profile:excludeThenInclude .

bio2rdf_rdfrule:sparqlownequivalentclassblanknoderemoval a queryall_rdfrule:NormalisationRule , queryall_rdfrule:TransformationRule , queryall_rdfrule:SparqlNormalisationRule , queryall_rdfrule:SparqlConstructRule ;
    queryall_rdfrule:sparqlMode queryall_rdfrule:onlyDeleteMatchingTriples ;
    queryall_rdfrule:sparqlConstructQueryTarget "?myUri <http://www.w3.org/2002/07/owl#equivalentClass> ?blanknode ." ;
    queryall_rdfrule:sparqlWherePattern "?myUri <http://www.w3.org/2002/07/owl#equivalentClass> ?blanknode . FILTER(isBlank(?blanknode)) OPTIONAL { ?blanknode ?pred ?obj } .
         FILTER (!bound(?obj)) " ;
	queryall_rdfrule:stage queryall_rdfrule:afterResultsToPool ;
	dc:title "Deletes references to blank nodes that were in OBO as dbxrefs rule if there is no other information about the blank node, as it is completely useless in these cases." ;
	queryall_rdfrule:order "100"^^xsd:int ;
	queryall_profile:profileIncludeExcludeOrder queryall_profile:excludeThenInclude .

bio2rdf_rdfrule:sparqlremoveplaintextemailaddresses a queryall_rdfrule:NormalisationRule , queryall_rdfrule:TransformationRule , queryall_rdfrule:SparqlNormalisationRule , queryall_rdfrule:SparqlConstructRule ;
    queryall_rdfrule:sparqlMode queryall_rdfrule:onlyDeleteMatchingTriples ;
    queryall_rdfrule:sparqlConstructQueryTarget "?myUri <http://xmlns.com/foaf/0.1/mbox> ?email . " ;
    queryall_rdfrule:sparqlWherePattern "?myUri <http://xmlns.com/foaf/0.1/mbox> ?email . FILTER(REGEX(str(?email), \"mailto:.*\") || REGEX(str(?email), \".*@.*\") ) " ;
	queryall_rdfrule:stage queryall_rdfrule:afterResultsToPool ;
	dc:title "Remove plain text email addresses that are marked up using the FOAF mbox predicate so that they can't be harvested by spammers." ;
	queryall_rdfrule:order "100"^^xsd:int ;
	queryall_profile:profileIncludeExcludeOrder queryall_profile:excludeThenInclude .

bio2rdf_rdfrule:sparqlremovelsid a queryall_rdfrule:NormalisationRule , queryall_rdfrule:TransformationRule , queryall_rdfrule:SparqlNormalisationRule , queryall_rdfrule:SparqlConstructRule ;
    queryall_rdfrule:sparqlMode queryall_rdfrule:onlyDeleteMatchingTriples ;
    queryall_rdfrule:sparqlConstructQueryTarget "?myUri <http://bio2rdf.org/bio2rdf_resource:lsid> ?lsid . " ;
    queryall_rdfrule:sparqlWherePattern " ?myUri <http://bio2rdf.org/bio2rdf_resource:lsid> ?lsid . " ;
	queryall_rdfrule:stage queryall_rdfrule:afterResultsToPool ;
	dc:title "Remove LSID links" ;
	queryall_rdfrule:order "100"^^xsd:int ;
	queryall_profile:profileIncludeExcludeOrder queryall_profile:excludeThenInclude .

bio2rdf_rdfrule:neurocommonsgeneaddsymboluri a queryall_rdfrule:NormalisationRule , queryall_rdfrule:TransformationRule , queryall_rdfrule:SparqlNormalisationRule , queryall_rdfrule:SparqlConstructRule ;
	queryall_rdfrule:hasRelatedNamespace bio2rdf_ns:symbol , bio2rdf_ns:geneid ;
    queryall_rdfrule:sparqlMode queryall_rdfrule:addAllMatchingTriples ;
    queryall_rdfrule:sparqlConstructQueryTarget "?myUri <http://bio2rdf.org/bio2rdf_resource:dbxref> ?symbolUri . " ;
    queryall_rdfrule:sparqlWherePattern " ?myUri ?symbolPredicate ?primarysymbol . filter(sameTerm(?symbolPredicate, iri(\"http://purl.org/science/owl/sciencecommons/ggp_has_primary_symbol\"))) . bind(iri(concat(\"http://bio2rdf.org/symbol:\", encode_for_uri(lcase(str(?primarySymbol))))) AS ?symbolUri)" ;
	queryall_rdfrule:stage queryall_rdfrule:afterResultsToPool ;
	dc:title "Add symbol URI based on Neurocommons gene symbol literals" ;
	queryall_rdfrule:order "100"^^xsd:int ;
	queryall_profile:profileIncludeExcludeOrder queryall_profile:excludeThenInclude .

bio2rdf_rdfrule:bioontology_obo_aeo_sparql a queryall_rdfrule:NormalisationRule , queryall_rdfrule:TransformationRule , queryall_rdfrule:SparqlNormalisationRule , queryall_rdfrule:SparqlConstructRule ;
	queryall_rdfrule:hasRelatedNamespace bio2rdf_ns:obo_aeo ;
    queryall_rdfrule:sparqlMode queryall_rdfrule:addAllMatchingTriples ;
	queryall_rdfrule:stage queryall_rdfrule:afterResultsImport ;
    queryall_rdfrule:sparqlConstructQueryTarget "" ;
    queryall_rdfrule:sparqlWherePattern " " ;
	dc:title "Converts between the URIs used by the BioOntology SPARQL endpoint for the OBO AEO ontology and the Bio2RDF normalised URIs" ;
	queryall_rdfrule:order "100"^^xsd:int ;
	queryall_profile:profileIncludeExcludeOrder queryall_profile:excludeThenInclude .

bio2rdf_rdfrule:pubchemcompoundadd a queryall_rdfrule:NormalisationRule , queryall_rdfrule:TransformationRule , queryall_rdfrule:SparqlNormalisationRule , queryall_rdfrule:SparqlConstructRule ;
	dc:title "Intelligently converts the old pubchem:... URIs to pubchemcompound:... when their type indicates that they are a compound and not a compound" ;
	queryall_rdfrule:hasRelatedNamespace bio2rdf_ns:pubchem , bio2rdf_ns:pubchemcompound ;
    queryall_rdfrule:sparqlMode queryall_rdfrule:addAllMatchingTriples ;
	queryall_rdfrule:stage queryall_rdfrule:afterResultsToPool ;
    queryall_rdfrule:sparqlConstructQueryTarget " ?pubchemCompoundUri <http://www.w3.org/2002/07/owl#sameAs> ?pubchemUri . ?pubchemCompoundUri a <http://bio2rdf.org/pubchem_resource:Compound> . ?pubchemCompoundUri ?p ?o . " ;
    queryall_rdfrule:sparqlWherePattern " ?pubchemUri a <http://bio2rdf.org/pubchem_resource:Compound> . ?pubchemUri ?p ?o . FILTER(isIRI(?pubchemUri) && strstarts(str(?pubchemUri), \"http://bio2rdf.org/pubchem:\")) . BIND (iri(concat(\"http://bio2rdf.org/pubchemcompound:\", encode_for_uri(substr(str(?pubchemUri), 28)))) AS ?pubchemCompoundUri) " ;
	queryall_rdfrule:order "100"^^xsd:int ;
	queryall_profile:profileIncludeExcludeOrder queryall_profile:excludeThenInclude .

bio2rdf_rdfrule:pubchemcompounddelete a queryall_rdfrule:NormalisationRule , queryall_rdfrule:TransformationRule , queryall_rdfrule:SparqlNormalisationRule , queryall_rdfrule:SparqlConstructRule ;
	dc:title "Deletes triples starting with the old pubchem:... URIs if there are any matching triples present starting with pubchem:compound." ;
	queryall_rdfrule:hasRelatedNamespace bio2rdf_ns:pubchem , bio2rdf_ns:pubchemcompound ;
    queryall_rdfrule:sparqlMode queryall_rdfrule:onlyDeleteMatchingTriples ;
	queryall_rdfrule:stage queryall_rdfrule:afterResultsToPool ;
    queryall_rdfrule:sparqlConstructQueryTarget " ?pubchemUri ?p ?o . " ;
    queryall_rdfrule:sparqlWherePattern " ?pubchemUri ?p ?o . FILTER(isIRI(?pubchemUri) && strstarts(str(?pubchemUri), \"http://bio2rdf.org/pubchem:\")) . BIND (iri(concat(\"http://bio2rdf.org/pubchemcompound:\", encode_for_uri(substr(str(?pubchemUri), 28)))) AS ?pubchemCompoundUri) . ?pubchemCompoundUri ?p ?o . " ;
# NOTE: This needs to be ordered after pubchemcompoundadd
	queryall_rdfrule:order "50"^^xsd:int ;
	queryall_profile:profileIncludeExcludeOrder queryall_profile:excludeThenInclude .

bio2rdf_rdfrule:pubchemsubstanceadd a queryall_rdfrule:NormalisationRule , queryall_rdfrule:TransformationRule , queryall_rdfrule:SparqlNormalisationRule , queryall_rdfrule:SparqlConstructRule ;
	dc:title "Intelligently converts the old pubchem:... URIs to pubchemsubstance:... when their type indicates that they are a substance and not a compound" ;
	queryall_rdfrule:hasRelatedNamespace bio2rdf_ns:pubchem , bio2rdf_ns:pubchemsubstance ;
    queryall_rdfrule:sparqlMode queryall_rdfrule:addAllMatchingTriples ;
	queryall_rdfrule:stage queryall_rdfrule:afterResultsToPool ;
    queryall_rdfrule:sparqlConstructQueryTarget " ?pubchemSubstanceUri <http://www.w3.org/2002/07/owl#sameAs> ?pubchemUri . ?pubchemSubstanceUri a <http://bio2rdf.org/pubchem_resource:Substance> . ?pubchemSubstanceUri ?p ?o . " ;
    queryall_rdfrule:sparqlWherePattern " ?pubchemUri a <http://bio2rdf.org/pubchem_resource:Substance> . ?pubchemUri ?p ?o . FILTER(isIRI(?pubchemUri) && strstarts(str(?pubchemUri), \"http://bio2rdf.org/pubchem:\")) . BIND (iri(concat(\"http://bio2rdf.org/pubchemsubstance:\", encode_for_uri(substr(str(?pubchemUri), 28)))) AS ?pubchemSubstanceUri) " ;
	queryall_rdfrule:order "100"^^xsd:int ;
	queryall_profile:profileIncludeExcludeOrder queryall_profile:excludeThenInclude .

bio2rdf_rdfrule:pubchemsubstancedelete a queryall_rdfrule:NormalisationRule , queryall_rdfrule:TransformationRule , queryall_rdfrule:SparqlNormalisationRule , queryall_rdfrule:SparqlConstructRule ;
	dc:title "Deletes triples starting with the old pubchem:... URIs if there are any matching triples present starting with pubchem:substance." ;
	queryall_rdfrule:hasRelatedNamespace bio2rdf_ns:pubchem , bio2rdf_ns:pubchemsubstance ;
    queryall_rdfrule:sparqlMode queryall_rdfrule:onlyDeleteMatchingTriples ;
	queryall_rdfrule:stage queryall_rdfrule:afterResultsToPool ;
    queryall_rdfrule:sparqlConstructQueryTarget " ?pubchemUri ?p ?o . " ;
    queryall_rdfrule:sparqlWherePattern " ?pubchemUri ?p ?o . FILTER(isIRI(?pubchemUri) && strstarts(str(?pubchemUri), \"http://bio2rdf.org/pubchem:\")) . BIND (iri(concat(\"http://bio2rdf.org/pubchemsubstance:\", encode_for_uri(substr(str(?pubchemUri), 28)))) AS ?pubchemSubstanceUri) . ?pubchemSubstanceUri ?p ?o . " ;
# NOTE: This needs to be ordered after pubchemsubstanceadd
	queryall_rdfrule:order "50"^^xsd:int ;
	queryall_profile:profileIncludeExcludeOrder queryall_profile:excludeThenInclude .
	
bio2rdf_rdfrule:pharmgkbdownloadlinkedtofrom a queryall_rdfrule:NormalisationRule , queryall_rdfrule:TransformationRule , queryall_rdfrule:SparqlNormalisationRule , queryall_rdfrule:SparqlConstructRule ;
	dc:title "Deletes triples on the pharmgkb SPARQL endpoint that do not point to a valid file and are added by the reverse construct process." ;
	queryall_rdfrule:hasRelatedNamespace bio2rdf_ns:pharmgkb , bio2rdf_ns:pharmgkb_resource , bio2rdf_ns:pharmgkb_vocabulary ;
    queryall_rdfrule:sparqlMode queryall_rdfrule:onlyDeleteMatchingTriples ;
	queryall_rdfrule:stage queryall_rdfrule:afterResultsToPool ;
    queryall_rdfrule:sparqlConstructQueryTarget " ?pharmgkbresource <http://bio2rdf.org/bio2rdf_resource:linkedToFrom> <http://download.bio2rdf.org/pharmgkb/pharmgkb-04-03-12.ttl> . " ;
    queryall_rdfrule:sparqlWherePattern " ?pharmgkbresource <http://bio2rdf.org/bio2rdf_resource:linkedToFrom> <http://download.bio2rdf.org/pharmgkb/pharmgkb-04-03-12.ttl> . " ;
	queryall_rdfrule:order "100"^^xsd:int ;
	queryall_profile:profileIncludeExcludeOrder queryall_profile:excludeThenInclude .
